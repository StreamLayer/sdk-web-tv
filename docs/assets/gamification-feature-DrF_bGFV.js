import{j as s,J as h,r as p,l as P,a as U,H as Z,c as F,b as B,d as z,W as O,s as Q,e as W,g as I,m as T,p as N,f as a,h as $,u as R,i as M,I as G,P as K,k as J,n as _,q as k,o as x,t as X,L as Y,v as E,w as ss}from"./main.js";const es=(e,n,t)=>{const r=n>=k.lg&&n<k.xl?75:52;e.current&&window.scrollTo({top:e.current.offsetTop-r,...t})},as=a("div")({name:"Container",class:"c1zy8a",propsAsIs:!1}),ns=a("div")({name:"Title",class:"t1vih9p5",propsAsIs:!1}),ts=a("div")({name:"Indicator",class:"i1fbnvpb",propsAsIs:!1}),y=({indicator:e,title:n})=>s.jsxs(as,{children:[s.jsx(ns,{children:n}),s.jsx(ts,{children:e})]}),rs=a("div")({name:"Container",class:"ctmhwyc",propsAsIs:!1}),is=a("div")({name:"Indicator",class:"i1jri200",propsAsIs:!1}),os=a("div")({name:"Title",class:"t8s05oq",propsAsIs:!1}),C=({indicator:e,title:n})=>s.jsxs(rs,{children:[s.jsx(is,{children:e}),s.jsx(os,{children:n})]}),ls=a("div")({name:"Container",class:"c1yrpn9o",propsAsIs:!1}),cs=a("div")({name:"TopInfo",class:"t17fwahh",propsAsIs:!1}),ds=a("div")({name:"BottomInfo",class:"by6w7e9",propsAsIs:!1}),ps=a("div")({name:"User",class:"u1g7arbm",propsAsIs:!1}),ms=a("img")({name:"Avatar",class:"a1ldeata",propsAsIs:!1}),us=a("div")({name:"UserInfo",class:"u10d4koz",propsAsIs:!1}),hs=a("div")({name:"UserName",class:"u1q6roj0",propsAsIs:!1}),xs=a("div")({name:"UserRating",class:"ui0m425",propsAsIs:!1}),js=a("img")({name:"TrophyIcon",class:"t1el3mrn",propsAsIs:!1}),vs=a("div")({name:"RtsContainer",class:"r2vgnxv",propsAsIs:!1}),Is=a("div")({name:"RtsDivider",class:"roqn06j",propsAsIs:!1}),Cs=a("div")({name:"Rts",class:"r15adx7c",propsAsIs:!1}),w=a("div")({name:"RtsIndicator",class:"rv59lta",propsAsIs:!1}),L=a("div")({name:"RtsLabel",class:"r55lotb",propsAsIs:!1}),As=a("div")({name:"Divider",class:"d1knfgqt",propsAsIs:!1}),gs=a("div")({name:"Ranks",class:"r1mqo824",propsAsIs:!1}),bs=a("div")({name:"Statistics",class:"sxareh6",propsAsIs:!1}),fs=a("div")({name:"AvatarPlaceholder",class:"amcu48h",propsAsIs:!1}),ks=a("button")({name:"UserAccountBtn",class:"u32nfkp",propsAsIs:!1}),ys="data:image/svg+xml,%3csvg%20width='16'%20height='16'%20viewBox='0%200%2016%2016'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20id='Trophy'%3e%3cpath%20id='Combined%20Shape'%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M3.69197%204.66662C3.69197%205.99705%203.92914%207.17787%204.4035%208.20912C3.49966%208.02451%202.74487%207.66486%202.1391%207.13014C1.53333%206.59542%201.23046%206.0798%201.23046%205.58328V4.66662H3.69197ZM14.7686%204.66662V5.58328C14.7686%206.0798%2014.4658%206.59542%2013.86%207.13014C13.2542%207.66486%2012.4994%208.02451%2011.5956%208.20912C12.0699%207.17787%2012.3071%205.99705%2012.3071%204.66662H14.7686ZM15.9998%205.58329V4.36108C15.9998%204.10645%2015.9101%203.89002%2015.7306%203.71178C15.5511%203.53354%2015.3332%203.44442%2015.0768%203.44442H12.3076V2.52776C12.3076%202.10763%2012.1569%201.74797%2011.8556%201.44878C11.5544%201.14959%2011.1922%201%2010.7691%201H5.23072C4.80764%201%204.44547%201.14959%204.14419%201.44878C3.84291%201.74797%203.69227%202.10763%203.69227%202.52776V3.44442H0.923068C0.666659%203.44442%200.448714%203.53354%200.269228%203.71178C0.0897418%203.89002%200%204.10645%200%204.36108V5.58329C0%206.03525%200.13301%206.49039%200.399034%206.94872C0.665059%207.40705%201.02403%207.82082%201.47595%208.19003C1.92787%208.55924%202.48234%208.86957%203.13939%209.12101C3.79644%209.37246%204.48713%209.51409%205.21149%209.54592C5.48071%209.88967%205.7852%2010.192%206.12494%2010.453C6.36853%2010.6695%206.53679%2010.9002%206.62974%2011.1453C6.72269%2011.3904%206.76916%2011.6752%206.76916%2011.9999C6.76916%2012.3436%206.67141%2012.6333%206.4759%2012.8688C6.28038%2013.1043%205.96789%2013.2221%205.53841%2013.2221C5.05764%2013.2221%204.62976%2013.3669%204.25476%2013.6566C3.87977%2013.9462%203.69227%2014.3106%203.69227%2014.7499V15.361C3.69227%2015.4501%203.72112%2015.5233%203.77881%2015.5806C3.8365%2015.6379%203.91022%2015.6665%203.99996%2015.6665H11.9999C12.0896%2015.6665%2012.1633%2015.6379%2012.221%2015.5806C12.2787%2015.5233%2012.3076%2015.4501%2012.3076%2015.361V14.7499C12.3076%2014.3106%2012.1201%2013.9462%2011.7451%2013.6566C11.3701%2013.3669%2010.9422%2013.2221%2010.4614%2013.2221C10.0319%2013.2221%209.71945%2013.1043%209.52394%2012.8688C9.32843%2012.6333%209.23068%2012.3436%209.23068%2011.9999C9.23068%2011.6752%209.27715%2011.3904%209.3701%2011.1453C9.46305%2010.9002%209.63131%2010.6695%209.8749%2010.453C10.2146%2010.192%2010.5191%209.88967%2010.7884%209.54592C11.5127%209.51409%2012.2034%209.37246%2012.8604%209.12101C13.5175%208.86957%2014.072%208.55924%2014.5239%208.19003C14.9758%207.82082%2015.3348%207.40705%2015.6008%206.94872C15.8668%206.49039%2015.9998%206.03525%2015.9998%205.58329ZM6.76047%207.1798L8.05109%206.49997L9.3417%207.1798L9.09521%205.73989L10.1393%204.72015L8.69639%204.51007L8.05109%203.2L7.40578%204.51007L5.96283%204.72015L7.00696%205.73989L6.76047%207.1798Z'%20fill='%23F2C94C'/%3e%3c/g%3e%3c/svg%3e",ws=({loading:e,hideFriendsRank:n,avatar:t,name:r,points:i,friendsRank:l,rank:c,streak:o,correct:d,incorrect:m,inTop:u,successRate:A})=>s.jsxs(ls,{"data-loading":e,children:[s.jsx(cs,{children:s.jsx(I,{loading:e,children:s.jsxs(ps,{children:[s.jsxs(ks,{children:[t&&s.jsx(ms,{alt:"avatar",src:t}),!t&&s.jsx(fs,{children:T(r||"")})]}),s.jsxs(us,{children:[s.jsx(hs,{children:r}),s.jsxs(xs,{children:[s.jsxs(vs,{children:[s.jsxs(Cs,{children:[s.jsx(js,{alt:"rank-icon",src:ys}),s.jsxs(w,{children:[N(i),s.jsx(L,{children:"PTS"})]})]}),n&&s.jsxs(w,{children:[s.jsx(Is,{}),c||0,s.jsx(L,{children:"global rank"})]})]}),!n&&s.jsxs(s.Fragment,{children:[s.jsx(As,{}),s.jsxs("div",{children:["TOP ",u||0,"%"]})]})]})]})]})})}),s.jsxs(ds,{children:[!n&&s.jsxs(gs,{children:[s.jsx(I,{loading:e,style:{width:"100%"},children:s.jsx(y,{indicator:l||0,title:"Friends rank"})}),s.jsx(I,{loading:e,style:{width:"100%"},children:s.jsx(y,{indicator:c||0,title:"Global rank"})})]}),s.jsx(I,{loading:e,children:s.jsxs(bs,{children:[s.jsx(C,{indicator:o||0,title:"Win streak"}),s.jsx(C,{indicator:d||0,title:"Correct"}),s.jsx(C,{indicator:m||0,title:"Incorrect"}),s.jsx(C,{indicator:`${A||0}%`,title:"Succ. rate"})]})})]})]}),Ls=a("div")({name:"Container",class:"c115qtkr",propsAsIs:!1}),Ss=a("div")({name:"STabs",class:"sxnslc8",propsAsIs:!1}),qs=a("button")({name:"Button",class:"b1umzux0",propsAsIs:!1}),Ts=a("span")({name:"Title",class:"tspsaas",propsAsIs:!1});var v=(e=>(e.HOME="home",e.LEADERBOARD="leaderboard",e))(v||{});const S=({title:e,active:n,onClick:t})=>s.jsx(qs,{"data-a":"intr",onClick:t,"data-selected":n,children:s.jsx(Ts,{"data-a":"intr",children:e})}),Ns=({activePage:e="home",toggleActivePage:n})=>s.jsx(Ls,{children:s.jsxs(Ss,{"data-position":e==="home"?"left":"right",children:[s.jsx(S,{title:"Home",active:e==="home",onClick:()=>n("home")}),s.jsx(S,{title:"Friends",active:e==="leaderboard",onClick:()=>n("leaderboard")})]})}),Rs=a("button")({name:"Container",class:"cpjnajb",propsAsIs:!1}),Ms=a("div")({name:"Content",class:"c4m6kaz",propsAsIs:!1}),Es=a("span")({name:"Title",class:"t1h8t9cc",propsAsIs:!1}),Vs=()=>s.jsx(Rs,{children:s.jsxs(Ms,{children:[s.jsx(x,{name:"iconCopySuccess"}),s.jsx(Es,{children:"Link Copied to Clipboard"})]})}),V=e=>{const n=p.useRef(),[t,r]=p.useState(null),i=p.useCallback(async l=>{var c;if(l&&(c=navigator==null?void 0:navigator.clipboard)!=null&&c.writeText){n.current&&(clearTimeout(n.current),r(null));try{await navigator.clipboard.writeText(l),e.current&&(r($.createPortal(s.jsx(Vs,{}),e.current)),n.current=setTimeout(()=>{r(null)},1e3))}catch(o){console.error("Unable to copy to clipboard",o)}}},[e]);return p.useEffect(()=>()=>{clearTimeout(n.current)},[]),[i,t]},Ds=a("div")({name:"Container",class:"c1ux29ft",propsAsIs:!1}),Hs=()=>x,Ps=a(Hs())({name:"FriendsIcon",class:"f10ncfg2",propsAsIs:!0}),Us=a("div")({name:"Content",class:"c1yc07bd",propsAsIs:!1}),Zs=a("div")({name:"Title",class:"tj6cq7w",propsAsIs:!1}),Fs=a("div")({name:"Description",class:"d1ag78xo",propsAsIs:!1}),Bs=()=>x,zs=a(Bs())({name:"ArrowInviteIcon",class:"awohrz6",propsAsIs:!0}),Os=({title:e,description:n,onClick:t,className:r})=>{const[i]=R({type:"invitation",action:"sent",payload:{from:M.TITLE_CARD}});return s.jsxs(Ds,{"data-a":"intr",onClick:i(t),className:r,children:[s.jsx(Ps,{name:"icon-friends"}),s.jsxs(Us,{children:[s.jsx(Zs,{children:e}),s.jsx(Fs,{children:n})]}),s.jsx(zs,{name:"icon-copy"})]})},Qs=a("div")({name:"Container",class:"culdu4a",propsAsIs:!1}),Ws=a("div")({name:"Position",class:"pwf8e69",propsAsIs:!1}),$s=a("img")({name:"Avatar",class:"atf4yh4",propsAsIs:!1}),Gs=a("div")({name:"AvatarPlaceholder",class:"a1dg29ja",propsAsIs:!1}),Ks=a("div")({name:"Content",class:"c10a68rc",propsAsIs:!1}),Js=a("div")({name:"NameContainer",class:"nc4kck5",propsAsIs:!1}),_s=a("span")({name:"Name",class:"njsrqgr",propsAsIs:!1}),Xs=()=>x,Ys=a(Xs())({name:"CurrentUserBadge",class:"c17uc4zr",propsAsIs:!0}),se=({friendsRank:e,avatar:n,name:t,userId:r,points:i,isCurrentUser:l,style:c})=>s.jsxs(Qs,{"data-name":r,style:c,children:[s.jsx(Ws,{children:e||0}),s.jsxs(Ks,{children:[n?s.jsx($s,{alt:"leaderboard-item-avatar",src:n}):s.jsx(Gs,{children:T(t||"")}),s.jsxs(Js,{children:[s.jsx(_s,{children:t||""}),l&&s.jsx(Ys,{name:"icon-star"})]})]}),s.jsx("div",{children:N(i)})]}),ee=a("div")({name:"Container",class:"c16btbfp",propsAsIs:!1}),ae=({items:e,currentUserId:n,openItemDetail:t,fetchMore:r,scrollNode:i,hasMore:l})=>{const c=p.useCallback(o=>{const d=o.target.getAttribute("data-name");d&&t(d)},[t]);return s.jsx(G,{loadMore:r,initialLoad:!1,hasMore:l,useWindow:!1,getScrollParent:()=>i.current,children:s.jsx(ee,{"data-a":"intr",onClick:c,children:e.map(o=>s.jsx(se,{...o,isCurrentUser:!!n&&n===o.userId},o.userId))})})},ne=a("div")({name:"Container",class:"c1itm4k7",propsAsIs:!1}),te=a("div")({name:"IconContainer",class:"i1w4fsni",propsAsIs:!1}),re=()=>x,ie=a(re())({name:"InviteGameIcon",class:"i19m85r1",propsAsIs:!0}),oe=a("div")({name:"Content",class:"c1mbu204",propsAsIs:!1}),le=a("div")({name:"Heading",class:"h1amdqtv",propsAsIs:!1}),ce=a("div")({name:"Subtext",class:"s1lhlj9j",propsAsIs:!1}),de=a("div")({name:"LinkContainer",class:"l1wot35e",propsAsIs:!1}),pe=a("div")({name:"LinkInfo",class:"l1jdw39q",propsAsIs:!1}),me=a("span")({name:"LinkTitle",class:"l1cr5mk",propsAsIs:!1}),ue=a("span")({name:"LinkAddress",class:"lvi87q4",propsAsIs:!1}),he=()=>x,xe=a(he())({name:"LinkIcon",class:"l1pqlvw3",propsAsIs:!0}),je=({inviteLink:e,inviteCardTitle:n,inviteCardSubtext:t,primaryColor:r,className:i})=>{const l=p.useRef(null),[c,o]=V(l),[d]=R({type:"invitation",action:"sent",payload:{from:M.MENU}});return s.jsxs(ne,{className:i,children:[s.jsx(te,{style:{backgroundColor:r},children:s.jsx(ie,{name:"invite-game-icon"})}),s.jsxs(oe,{children:[s.jsx(le,{children:n||""}),s.jsx(ce,{children:t||""})]}),e&&s.jsxs(de,{ref:l,"data-a":"intr",onClick:d(()=>c(e)),children:[s.jsxs(pe,{children:[s.jsx(me,{children:"Invite link"}),s.jsx(ue,{children:e})]}),s.jsx(xe,{name:"icon-copy"})]}),o]})},ve=a("div")({name:"InviteFriendsContainer",class:"i1c9dygq",propsAsIs:!1}),Ie=({deepLink:e})=>s.jsx(ve,{children:s.jsx(je,{inviteLink:e,inviteCardTitle:"Itâ€™s More Fun With Friends",inviteCardSubtext:"Invite and compete against your friends for the top spot on the leaderboard."})}),Ce=a("div")({name:"InviteLinkContainer",class:"i1odbhm4",propsAsIs:!1}),Ae=({gamification:e,scrollNode:n,scrollStore:t})=>{const r=p.useRef(null),{data:i,hasMore:l,loading:c,key:o}=h(e.leaderboardList.$store),{data:d}=h(e.deepLink.$store),[m,u]=V(r);return!i.length&&!c?s.jsx(Ie,{deepLink:d}):s.jsxs(s.Fragment,{children:[s.jsx(ae,{items:i,scrollNode:n,scrollStore:t,fetchMore:e.leaderboardList.fetchMore,hasMore:l,openItemDetail:e.openUser,currentUserId:e.currentUserId.get()},o),d&&s.jsx(Ce,{ref:r,children:s.jsx(Os,{"data-a":"intr",onClick:()=>m(d),title:"Invite Friends",description:"Challenge them now!"})}),u]})},ge=()=>E,be=a(ge())({name:"Container",class:"cll3md7",propsAsIs:!0}),fe=()=>ss,ke=a(fe())({name:"ActionBtn",class:"a10g1iik",propsAsIs:!0}),ye=({questionId:e,...n})=>s.jsxs(be,{"data-a":"intr","data-name":e,children:[s.jsx(X,{questionId:e,...n}),s.jsx(ke,{"data-a":"intr","data-name":e,children:"View Insight"})]}),we=()=>E,Le=a(we())({name:"Container",class:"cl56x6b",propsAsIs:!0}),Se=a("button")({name:"ActionButton",class:"a11pzf92",propsAsIs:!1}),qe=a("blockquote")({name:"Quote",class:"q1hbaleq",propsAsIs:!1}),Te=({...e})=>s.jsxs(Le,{"data-a":"intr","data-name":e.tweetId,children:[e.title&&s.jsx(qe,{children:e.title}),s.jsx(Y,{...e}),s.jsx(Se,{"data-a":"intr","data-name":e.tweetId,children:"View Insight"})]}),q=a("div")({name:"QuestionsContainer",class:"qvghv3l",propsAsIs:!1}),Ne=({questions:e,openQuestion:n,controlVideo:t})=>e?s.jsx(q,{"data-a":"intr",onClick:r=>{const i=r.target.getAttribute("data-name");i&&(K(),n(i,{openedFrom:"list"}))},children:e==null?void 0:e.map(r=>{var i,l,c;if(r.type==="question"&&((i=r.attributes)==null?void 0:i.attributes.case)==="question"){const o=r.attributes.attributes.value;return s.jsx(J,{...o},o.questionId)}if(r.type==="insight"&&((l=r.attributes)==null?void 0:l.attributes.case)==="insight"){const o=r.attributes.attributes.value;return s.jsx(ye,{controlVideo:t,...o},o.questionId)}if(r.type==="tweet"&&((c=r.attributes)==null?void 0:c.attributes.case)==="tweet"){const o=r.attributes.attributes.value,d=r.attributes.id;return s.jsx(Te,{controlVideo:t,...o,tweetId:d},d)}return null})}):s.jsx(q,{children:Array.from({length:5}).map((r,i)=>s.jsx(_,{},i))}),Re=({store:e,openQuestion:n})=>{const{sdk:t}=W(),r=h(e);return s.jsx(Ne,{openQuestion:n,questions:r.data,controlVideo:t==null?void 0:t.controlVideoPlayer})},Me=({userSummary:e})=>{var n;const[t,r]=p.useState(void 0);return p.useEffect(()=>{const i=e.$store.subscribe(l=>{l&&r(l)});return()=>{i()}},[e]),s.jsx(ws,{loading:!(t!=null&&t.summary),...t==null?void 0:t.summary,successRate:(n=t==null?void 0:t.percentage)==null?void 0:n.correct})},Ee=({gamification:e,className:n,scrollStore:t,scrollNode:r,appNode:i,style:l,responsiveStore:c})=>{const{tabsShown:o}=h(t,{keys:["tabsShown"]}),d=h(e.friendsTabEnabled),[m,u]=p.useState(v.HOME),[,A]=P(),{sdkInDesktopView:b,screen:D}=h(c,{keys:["sdkInDesktopView"]}),H=j=>{A(()=>{var f;u(j),b===!1&&(((f=i.current)==null?void 0:f.getBoundingClientRect().y)||0)<0&&es(i,D.size,{behavior:"instant"})})};p.useEffect(()=>t.subscribe(j=>{if(j.scrollPosition===0){t.setKey("tabsShown",!0);return}c.get().sdkInDesktopView?t.setKey("tabsShown",j.scrollDirection==="backward"):t.setKey("tabsShown",j.scrollDirection==="forward")}),[t,c]),p.useEffect(()=>{d||u(v.HOME)},[d]);let g="0px";return b?g=o?"0px":"calc(0px - var(--header-height))":g=o?"var(--header-height)":"0px",s.jsxs(U,{className:Z(n,"SL-Tabs","sl-hide-on-modal"),style:l,children:[d&&s.jsx(F,{style:{top:g},children:s.jsx(Ns,{activePage:m,toggleActivePage:H})}),m===v.HOME&&s.jsxs(s.Fragment,{children:[s.jsx(B,{children:s.jsx(z,{children:s.jsx(Me,{userSummary:e.userSummary})})}),s.jsx(O,{style:{flex:1},children:s.jsx(Re,{openQuestion:e.openQuestion,store:e.feedList.getStore()})})]}),m===v.LEADERBOARD&&s.jsx(Q,{children:s.jsx(Ae,{scrollStore:t,scrollNode:r,gamification:e})})]})},De=({gamification:e,scrollStore:n,className:t,appNode:r,scrollNode:i,responsiveStore:l})=>s.jsx(Ee,{appNode:r,scrollStore:n,scrollNode:i,className:t,gamification:e,responsiveStore:l});export{De as default};
